<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025上半年AI API市场深度解析 - 基于OpenRouter数据</title>
    <script src="https://cdn.tailwindcss.com/3.4.3"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        .font-noto {
            font-family: 'Noto Sans SC', sans-serif;
        }
        /* Custom scrollbar for a more refined look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }
        .dark ::-webkit-scrollbar-track {
            background-color: #2d3748;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #c1c1c1;
            border-radius: 10px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background-color: #4a5568;
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: #a8a8a8;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background-color: #718096;
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Noto Sans SC', 'sans-serif'],
                    },
                    colors: {
                        'brand-dark': '#0D0D0F',
                        'brand-card': '#1A1A1C',
                        'brand-border': '#28282A',
                        'brand-light': '#F7F7F8',
                        'brand-light-card': '#FFFFFF',
                        'brand-light-border': '#EAEAEA',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-brand-light dark:bg-brand-dark text-gray-800 dark:text-gray-200 font-sans antialiased transition-colors duration-300">

    <div id="app" class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <header class="flex justify-between items-center py-6 border-b border-brand-light-border dark:border-brand-border">
            <h1 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-white">AI API 市场洞察</h1>
            <button id="theme-toggle" class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-brand-card focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-brand-dark transition-all duration-300">
                <i class="fas fa-sun block dark:hidden text-lg"></i>
                <i class="fas fa-moon hidden dark:block text-lg"></i>
                <span class="sr-only">Toggle theme</span>
            </button>
        </header>

        <main class="py-12 md:py-16">
            <!-- Hero Section -->
            <section class="text-center mb-16 md:mb-24 fade-in">
                <h2 class="text-4xl md:text-6xl font-extrabold tracking-tight text-gray-900 dark:text-white leading-tight">
                    2025上半年 AI API 市场<br class="hidden md:block" />谁是真正的王者？
                </h2>
                <p class="mt-4 max-w-3xl mx-auto text-lg md:text-xl text-gray-600 dark:text-gray-400">
                    基于 OpenRouter 平台数据，深入解读大模型API市场的格局变迁、关键趋势与未来展望。
                </p>
            </section>

            <!-- Key Insights Summary -->
            <section class="mb-16 md:mb-24 fade-in" style="animation-delay: 0.2s;">
                <h3 class="text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white">核心洞察</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Insight 1 -->
                    <div class="p-6 bg-brand-light-card dark:bg-brand-card border border-brand-light-border dark:border-brand-border rounded-xl transform hover:-translate-y-1 transition-transform duration-300 shadow-sm hover:shadow-xl">
                        <div class="flex items-center mb-4">
                            <div class="p-3 rounded-full bg-blue-100 dark:bg-blue-900/50 mr-4">
                                <i class="fas fa-crown text-blue-500 dark:text-blue-400 text-xl"></i>
                            </div>
                            <h4 class="text-xl font-bold text-gray-900 dark:text-white">Google 强势领跑</h4>
                        </div>
                        <p class="text-gray-600 dark:text-gray-400">
                            凭借高性价比的 Flash 模型和全面的产品布局，Google 占据近半壁江山，在多个细分领域展现出统治级表现。
                        </p>
                    </div>
                    <!-- Insight 2 -->
                    <div class="p-6 bg-brand-light-card dark:bg-brand-card border border-brand-light-border dark:border-brand-border rounded-xl transform hover:-translate-y-1 transition-transform duration-300 shadow-sm hover:shadow-xl">
                        <div class="flex items-center mb-4">
                            <div class="p-3 rounded-full bg-green-100 dark:bg-green-900/50 mr-4">
                                <i class="fas fa-chart-line text-green-500 dark:text-green-400 text-xl"></i>
                            </div>
                            <h4 class="text-xl font-bold text-gray-900 dark:text-white">DeepSeek 异军突起</h4>
                        </div>
                        <p class="text-gray-600 dark:text-gray-400">
                            DeepSeek-V3 以其高用户粘性稳居市场前列，尤其在角色扮演领域表现出色，成为市场中不可忽视的力量。
                        </p>
                    </div>
                    <!-- Insight 3 -->
                    <div class="p-6 bg-brand-light-card dark:bg-brand-card border border-brand-light-border dark:border-brand-border rounded-xl transform hover:-translate-y-1 transition-transform duration-300 shadow-sm hover:shadow-xl">
                        <div class="flex items-center mb-4">
                            <div class="p-3 rounded-full bg-purple-100 dark:bg-purple-900/50 mr-4">
                                <i class="fas fa-cogs text-purple-500 dark:text-purple-400 text-xl"></i>
                            </div>
                            <h4 class="text-xl font-bold text-gray-900 dark:text-white">市场高度细分</h4>
                        </div>
                        <p class="text-gray-600 dark:text-gray-400">
                            编程、翻译、角色扮演等领域呈现出不同的模型偏好。长尾模型总和用量巨大，证明市场需求多样且活跃。
                        </p>
                    </div>
                </div>
            </section>

            <!-- Market Share -->
            <section class="mb-16 md:mb-24 fade-in" style="animation-delay: 0.4s;">
                <h3 class="text-3xl font-bold text-center mb-4 text-gray-900 dark:text-white">市场份额变迁</h3>
                <p class="text-center text-gray-600 dark:text-gray-400 mb-12">各模型提供商在2025上半年的市场份额动态对比。</p>
                <div class="bg-brand-light-card dark:bg-brand-card border border-brand-light-border dark:border-brand-border rounded-xl p-6 md:p-8 shadow-lg">
                    <div class="flex flex-col lg:flex-row gap-8">
                        <div class="w-full lg:w-1/3">
                            <h4 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">最新市场份额 (2025年7月)</h4>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center gap-4">
                                    <span class="font-medium text-blue-500 dark:text-blue-400">Google</span>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                                        <div class="bg-blue-500 h-2.5 rounded-full" style="width: 43.1%"></div>
                                    </div>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">43.1%</span>
                                </div>
                                <div class="flex justify-between items-center gap-4">
                                    <span class="font-medium text-green-500 dark:text-green-400">DeepSeek</span>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                                        <div class="bg-green-500 h-2.5 rounded-full" style="width: 19.6%"></div>
                                    </div>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">19.6%</span>
                                </div>
                                <div class="flex justify-between items-center gap-4">
                                    <span class="font-medium text-indigo-500 dark:text-indigo-400">Anthropic</span>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                                        <div class="bg-indigo-500 h-2.5 rounded-full" style="width: 18.4%"></div>
                                    </div>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">18.4%</span>
                                </div>
                                <div class="flex justify-between items-center gap-4">
                                    <span class="font-medium text-pink-500 dark:text-pink-400">OpenAI</span>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                                        <div class="bg-pink-500 h-2.5 rounded-full" style="width: 5.9%"></div>
                                    </div>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">5.9%</span>
                                </div>
                                <div class="flex justify-between items-center gap-4">
                                    <span class="font-medium text-orange-500 dark:text-orange-400">Meta (Llama)</span>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                                        <div class="bg-orange-500 h-2.5 rounded-full" style="width: 3.7%"></div>
                                    </div>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">3.7%</span>
                                </div>
                                <div class="flex justify-between items-center gap-4">
                                    <span class="font-medium text-gray-500">其他</span>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                                        <div class="bg-gray-400 h-2.5 rounded-full" style="width: 9.3%"></div>
                                    </div>
                                    <span class="font-semibold text-gray-700 dark:text-gray-300">~9.3%</span>
                                </div>
                            </div>
                        </div>
                        <div class="w-full lg:w-2/3">
                            <h4 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">关键趋势解读</h4>
                            <ul class="space-y-3 list-inside list-disc text-gray-600 dark:text-gray-400">
                                <li><strong>Google 挤压市场：</strong>Google 市场份额持续扩大，强势挤压了 Anthropic 的空间。</li>
                                <li><strong>OpenAI 份额波动：</strong>API 市场表现波动剧烈，与头部差距明显，可能受定价及API获取策略影响。</li>
                                <li><strong>DeepSeek 稳步增长：</strong>自 V3 模型发布后，份额持续扩大，展现出强大的用户吸引力。</li>
                                <li><strong>Llama 份额萎缩：</strong>Meta 的 Llama 系列模型份额持续缩小，已不及高点时期的五分之一。</li>
                                <li><strong>Gryphe 退场：</strong>专注于微调的 Gryphe 组织已基本退出市场竞争。</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Domain Specialization -->
            <section class="mb-16 md:mb-24 fade-in" style="animation-delay: 0.6s;">
                <h3 class="text-3xl font-bold text-center mb-4 text-gray-900 dark:text-white">细分领域霸主</h3>
                <p class="text-center text-gray-600 dark:text-gray-400 mb-12">不同应用场景下，开发者们最青睐哪些模型？</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Programming -->
                    <div class="bg-brand-light-card dark:bg-brand-card border border-brand-light-border dark:border-brand-border rounded-xl p-6 shadow-lg">
                        <div class="flex items-center gap-4 mb-4">
                            <i class="fas fa-code text-2xl text-green-500"></i>
                            <h4 class="text-2xl font-bold text-gray-900 dark:text-white">编程领域</h4>
                        </div>
                        <p class="mb-6 text-gray-600 dark:text-gray-400">Anthropic 的 Claude 模型在代码生成和理解方面表现出绝对优势。</p>
                        <div class="space-y-3">
                            <p class="font-semibold">🥇 <span class="text-green-400">Claude-Sonnet-4 (Anthropic):</span> <span class="font-bold float-right">44.5%</span></p>
                            <p class="font-semibold">🥈 <span class="text-gray-400">Gemini-2.5-Pro (Google):</span> <span class="font-bold float-right">17.6%</span></p>
                            <p class="font-semibold">🥉 <span class="text-gray-400">其他模型总和:</span> <span class="font-bold float-right">10.8%</span></p>
                        </div>
                    </div>
                    <!-- Translation -->
                    <div class="bg-brand-light-card dark:bg-brand-card border border-brand-light-border dark:border-brand-border rounded-xl p-6 shadow-lg">
                        <div class="flex items-center gap-4 mb-4">
                            <i class="fas fa-language text-2xl text-blue-500"></i>
                            <h4 class="text-2xl font-bold text-gray-900 dark:text-white">文本翻译</h4>
                        </div>
                        <p class="mb-6 text-gray-600 dark:text-gray-400">Google 以其“量大、便宜、快速”的特性，几乎垄断了翻译场景。</p>
                        <div class="space-y-3">
                            <p class="font-semibold">🥇 <span class="text-blue-400">Gemini-2.0-Flash (Google):</span> <span class="font-bold float-right">45.7%</span></p>
                            <p class="font-semibold">🥈 <span class="text-gray-400">其他模型总和:</span> <span class="font-bold float-right">20.1%</span></p>
                            <p class="font-semibold">🥉 <span class="text-gray-400">Gemini-1.5-Flash-BB (Google):</span> <span class="font-bold float-right">14.0%</span></p>
                        </div>
                        <p class="text-sm mt-4 text-gray-500">值得注意的是，该领域Top 10榜单中，Google模型占据了7席。</p>
                    </div>
                    <!-- Roleplay -->
                    <div class="bg-brand-light-card dark:bg-brand-card border border-brand-light-border dark:border-brand-border rounded-xl p-6 shadow-lg">
                        <div class="flex items-center gap-4 mb-4">
                            <i class="fas fa-theater-masks text-2xl text-purple-500"></i>
                            <h4 class="text-2xl font-bold text-gray-900 dark:text-white">角色扮演</h4>
                        </div>
                        <p class="mb-6 text-gray-600 dark:text-gray-400">市场极度细分，模型的“创意”和“幻觉”成为加分项。</p>
                        <div class="space-y-3">
                            <p class="font-semibold">🥇 <span class="text-purple-400">其他模型总和:</span> <span class="font-bold float-right">26.6%</span></p>
                            <p class="font-semibold">🥈 <span class="text-gray-400">DeepSeek V3 0324 (DeepSeek):</span> <span class="font-bold float-right">26.5%</span></p>
                            <p class="font-semibold">🥉 <span class="text-gray-400">Gemini-2.0-Flash (Google):</span> <span class="font-bold float-right">18.5%</span></p>
                        </div>
                        <p class="text-sm mt-4 text-gray-500">长尾模型和小众模型在此领域百花齐放，满足用户的个性化需求。</p>
                    </div>
                    <!-- Marketing -->
                    <div class="bg-brand-light-card dark:bg-brand-card border border-brand-light-border dark:border-brand-border rounded-xl p-6 shadow-lg">
                        <div class="flex items-center gap-4 mb-4">
                            <i class="fas fa-bullhorn text-2xl text-red-500"></i>
                            <h4 class="text-2xl font-bold text-gray-900 dark:text-white">市场营销</h4>
                        </div>
                        <p class="mb-6 text-gray-600 dark:text-gray-400">OpenAI 在非编程的专业知识领域依然保持着强大的竞争力。</p>
                        <div class="space-y-3">
                            <p class="font-semibold">🥇 <span class="text-red-400">GPT-4o (OpenAI):</span> <span class="font-bold float-right">32.5%</span></p>
                            <p class="font-semibold">🥈 <span class="text-gray-400">其他模型总和:</span> <span class="font-bold float-right">18.2%</span></p>
                            <p class="font-semibold">🥉 <span class="text-gray-400">Gemini-2.5-Flash (Google):</span> <span class="font-bold float-right">10.3%</span></p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Top Apps -->
            <section class="mb-16 md:mb-24 fade-in" style="animation-delay: 0.8s;">
                <h3 class="text-3xl font-bold text-center mb-4 text-gray-900 dark:text-white">热门应用排行榜</h3>
                <p class="text-center text-gray-600 dark:text-gray-400 mb-12">通过 OpenRouter 调用 API 的应用中，代码类工具占据主导地位。</p>
                <div class="bg-brand-light-card dark:bg-brand-card border border-brand-light-border dark:border-brand-border rounded-xl shadow-lg overflow-hidden">
                    <ul class="divide-y divide-brand-light-border dark:divide-brand-border">
                        <li class="p-4 flex items-center justify-between font-medium text-gray-500 dark:text-gray-400 text-sm">
                            <span>应用名称</span>
                            <span>类别 / 描述</span>
                        </li>
                        <li class="p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-brand-card/50 transition-colors duration-200">
                            <span class="font-bold text-lg text-gray-800 dark:text-gray-200">1. Cline</span>
                            <span class="text-gray-600 dark:text-gray-400">自主编程代理</span>
                        </li>
                        <li class="p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-brand-card/50 transition-colors duration-200">
                            <span class="font-bold text-lg text-gray-800 dark:text-gray-200">2. Roo Code</span>
                            <span class="text-gray-600 dark:text-gray-400">AI 代理开发团队</span>
                        </li>
                        <li class="p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-brand-card/50 transition-colors duration-200">
                            <span class="font-bold text-lg text-gray-800 dark:text-gray-200">3. liteLLM</span>
                            <span class="text-gray-600 dark:text-gray-400">模型路由库</span>
                        </li>
                        <li class="p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-brand-card/50 transition-colors duration-200">
                            <span class="font-bold text-lg text-gray-800 dark:text-gray-200">4. KiloCode</span>
                            <span class="text-gray-600 dark:text-gray-400">VS Code AI 编码助手</span>
                        </li>
                        <li class="p-4 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-brand-card/50 transition-colors duration-200">
                            <span class="font-bold text-lg text-gray-800 dark:text-gray-200">5. SillyTavern</span>
                            <span class="text-gray-600 dark:text-gray-400">本地 LLM 对话前端</span>
                        </li>
                    </ul>
                </div>
            </section>

             <!-- Final Summary & Outlook -->
            <section class="mb-16 md:mb-24 fade-in" style="animation-delay: 1s;">
                <h3 class="text-3xl font-bold text-center mb-12 text-gray-900 dark:text-white">总结与展望</h3>
                <div class="space-y-8">
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 items-start">
                        <div class="md:col-span-1 flex justify-center md:justify-end">
                            <div class="w-16 h-16 rounded-full flex items-center justify-center bg-blue-100 dark:bg-blue-900/50 text-blue-500 dark:text-blue-400 text-2xl font-bold">G</div>
                        </div>
                        <div class="md:col-span-4">
                            <h4 class="text-xl font-bold mb-2 text-gray-900 dark:text-white">Google：全面领先</h4>
                            <p class="text-gray-600 dark:text-gray-400">凭借 Gemini-2.0-Flash 的高性价比和 Gemini-2.5 系列的强大性能，Google 在市场上占据主导。其产品线覆盖高中低端，几乎在所有领域都有极具竞争力的解决方案。</p>
                        </div>
                    </div>
                     <div class="grid grid-cols-1 md:grid-cols-5 gap-6 items-start">
                        <div class="md:col-span-1 flex justify-center md:justify-end">
                             <div class="w-16 h-16 rounded-full flex items-center justify-center bg-indigo-100 dark:bg-indigo-900/50 text-indigo-500 dark:text-indigo-400 text-2xl font-bold">A</div>
                        </div>
                        <div class="md:col-span-4">
                            <h4 class="text-xl font-bold mb-2 text-gray-900 dark:text-white">Anthropic：专注编程</h4>
                            <p class="text-gray-600 dark:text-gray-400">尽管整体市场份额被挤压，但 Anthropic 的 Claude 系列在编程领域依然是绝对王者，成功完成了模型迭代，巩固了其在专业开发者心中的地位。</p>
                        </div>
                    </div>
                     <div class="grid grid-cols-1 md:grid-cols-5 gap-6 items-start">
                        <div class="md:col-span-1 flex justify-center md:justify-end">
                            <div class="w-16 h-16 rounded-full flex items-center justify-center bg-pink-100 dark:bg-pink-900/50 text-pink-500 dark:text-pink-400 text-2xl font-bold">O</div>
                        </div>
                        <div class="md:col-span-4">
                            <h4 class="text-xl font-bold mb-2 text-gray-900 dark:text-white">OpenAI：API市场表现平平</h4>
                            <p class="text-gray-600 dark:text-gray-400">尽管品牌声量巨大，但在 OpenRouter 的 API 调用数据中表现并不突出。定价、API 访问限制以及市场策略可能是其份额波动较大的原因。</p>
                        </div>
                    </div>
                     <div class="grid grid-cols-1 md:grid-cols-5 gap-6 items-start">
                        <div class="md:col-span-1 flex justify-center md:justify-end">
                            <div class="w-16 h-16 rounded-full flex items-center justify-center bg-green-100 dark:bg-green-900/50 text-green-500 dark:text-green-400 text-2xl font-bold">D</div>
                        </div>
                        <div class="md:col-span-4">
                            <h4 class="text-xl font-bold mb-2 text-gray-900 dark:text-white">其他玩家展望</h4>
                            <p class="text-gray-600 dark:text-gray-400">
                                <strong class="text-gray-700 dark:text-gray-300">DeepSeek:</strong> 用户粘性极高，未来可期。<br>
                                <strong class="text-gray-700 dark:text-gray-300">Meta (Llama):</strong> 开源优势未能有效转化为 API 市场份额，面临边缘化风险。<br>
                                <strong class="text-gray-700 dark:text-gray-300">Mistral & Qwen:</strong> 占据少量但稳定的市场份额，在特定用户群中有影响力。<br>
                                <strong class="text-gray-700 dark:text-gray-300">X-AI (Grok):</strong> 已有起色但市场定位尚不清晰，要挑战 SOTA 地位仍任重道远。
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="mt-24 border-t border-brand-light-border dark:border-brand-border py-8">
            <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                <div class="flex items-center space-x-4">
                    <p class="font-semibold text-gray-800 dark:text-gray-200">Taro YU</p>
                    <div class="h-4 w-px bg-gray-300 dark:bg-gray-600"></div>
                    <div class="flex space-x-4">
                        <a href="https://x.com/Taro23333333" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors duration-300">
                            <i class="fab fa-x-twitter text-lg"></i>
                            <span class="sr-only">X / Twitter</span>
                        </a>
                        <a href="https://engage.cloud.microsoft/main/users/eyJfdHlwZSI6IlVzZXIiLCJpZCI6IjE2Mzk3MzMzNTYifQ" target="_blank" rel="noopener noreferrer" class="text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors duration-300">
                            <i class="fas fa-link text-lg"></i>
                            <span class="sr-only">Engage</span>
                        </a>
                    </div>
                </div>
                <div class="text-center md:text-right">
                    <p class="text-sm text-gray-500 dark:text-gray-400" id="copyright"></p>
                    <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">This page is a curated summary and visualization. It does not represent the views of the original content creators.</p>
                </div>
            </div>
        </footer>

    </div>

    <script>
        // Self-invoking function to encapsulate the theme switching logic
        (function() {
            const themeToggleBtn = document.getElementById('theme-toggle');
            const sunIcon = themeToggleBtn.querySelector('.fa-sun');
            const moonIcon = themeToggleBtn.querySelector('.fa-moon');
            const htmlEl = document.documentElement;

            // Function to apply the theme
            function applyTheme(theme) {
                if (theme === 'dark') {
                    htmlEl.classList.add('dark');
                    sunIcon.style.display = 'none';
                    moonIcon.style.display = 'block';
                } else {
                    htmlEl.classList.remove('dark');
                    sunIcon.style.display = 'block';
                    moonIcon.style.display = 'none';
                }
            }

            // Determine initial theme
            const storedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const initialTheme = storedTheme ? storedTheme : (prefersDark ? 'dark' : 'light');
            
            applyTheme(initialTheme);

            // Add click event listener to the toggle button
            themeToggleBtn.addEventListener('click', () => {
                const isDark = htmlEl.classList.contains('dark');
                const newTheme = isDark ? 'light' : 'dark';
                
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
            });

            // Set dynamic copyright year
            const copyrightEl = document.getElementById('copyright');
            if (copyrightEl) {
                copyrightEl.textContent = `© ${new Date().getFullYear()} Taro YU. All Rights Reserved.`;
            }

            // Fade in elements on scroll
            const faders = document.querySelectorAll('.fade-in');
            const appearOptions = {
                threshold: 0.1,
                rootMargin: "0px 0px -50px 0px"
            };

            const appearOnScroll = new IntersectionObserver(function(entries, appearOnScroll) {
                entries.forEach(entry => {
                    if (!entry.isIntersecting) {
                        return;
                    } else {
                        entry.target.classList.add('visible');
                        appearOnScroll.unobserve(entry.target);
                    }
                });
            }, appearOptions);

            faders.forEach(fader => {
                appearOnScroll.observe(fader);
            });
        })();
    </script>
</body>
</html>
